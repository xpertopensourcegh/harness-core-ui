{
  "validate": true,
  "enableSchemaRequest": true,
  "hover": true,
  "completion": true,
  "schemas": [
    {
      "fileMatch": ["*"],
      "schema": {
        "$schema": "http://json-schema.org/draft-07/schema",
        "type": "object",
        "required": ["secret"],
        "properties": {
          "secret": {
            "type": "object",
            "required": ["type", "name", "identifier", "spec"],
            "properties": {
              "name": {
                "type": "string"
              },
              "identifier": {
                "type": "string"
              },
              "projectIdentifier": {
                "type": "string"
              },
              "organisationIdentifier": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "tags": {
                "$id": "#/properties/tags",
                "type": "object"
              },
              "type": {
                "type": "string",
                "enum": ["SecretText", "SecretFile", "SSHKey"]
              }
            },
            "allOf": [
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "SecretText"
                    }
                  }
                },
                "then": {
                  "required": ["spec"],
                  "properties": {
                    "spec": {
                      "type": "object",
                      "required": ["secretManagerIdentifier"],
                      "properties": {
                        "secretManagerIdentifier": {
                          "type": "string"
                        },
                        "valueType": {
                          "type": "string",
                          "enum": ["Inline", "Reference"]
                        },
                        "value": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "SecretFile"
                    }
                  }
                },
                "then": {
                  "required": ["spec"],
                  "properties": {
                    "spec": {
                      "type": "object",
                      "required": ["secretManagerIdentifier"],
                      "properties": {
                        "secretManagerIdentifier": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "type": {
                      "const": "SSHKey"
                    }
                  }
                },
                "then": {
                  "required": ["spec"],
                  "properties": {
                    "spec": {
                      "type": "object",
                      "required": ["port", "auth"],
                      "properties": {
                        "port": {
                          "type": "number"
                        },
                        "auth": {
                          "type": "object",
                          "required": ["type"],
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": ["SSH", "Kerberos"]
                            }
                          },
                          "allOf": [
                            {
                              "if": {
                                "properties": {
                                  "type": {
                                    "const": "SSH"
                                  }
                                }
                              },
                              "then": {
                                "required": ["spec"],
                                "properties": {
                                  "spec": {
                                    "type": "object",
                                    "required": ["credentialType"],
                                    "properties": {
                                      "credentialType": {
                                        "type": "string",
                                        "enum": ["Password", "KeyPath", "KeyReference"]
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "if": {
                                          "properties": {
                                            "credentialType": {
                                              "const": "Password"
                                            }
                                          }
                                        },
                                        "then": {
                                          "required": ["spec"],
                                          "properties": {
                                            "spec": {
                                              "type": "object",
                                              "required": ["userName", "password"],
                                              "properties": {
                                                "userName": {
                                                  "type": "string"
                                                },
                                                "password": {
                                                  "type": "string"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      },
                                      {
                                        "if": {
                                          "properties": {
                                            "credentialType": {
                                              "const": "KeyPath"
                                            }
                                          }
                                        },
                                        "then": {
                                          "required": ["spec"],
                                          "properties": {
                                            "spec": {
                                              "type": "object",
                                              "required": ["userName", "keyPath"],
                                              "properties": {
                                                "userName": {
                                                  "type": "string"
                                                },
                                                "keyPath": {
                                                  "type": "string"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      },
                                      {
                                        "if": {
                                          "properties": {
                                            "credentialType": {
                                              "const": "KeyReference"
                                            }
                                          }
                                        },
                                        "then": {
                                          "required": ["spec"],
                                          "properties": {
                                            "spec": {
                                              "type": "object",
                                              "required": ["userName", "key"],
                                              "properties": {
                                                "userName": {
                                                  "type": "string"
                                                },
                                                "key": {
                                                  "type": "string"
                                                },
                                                "encryptedPassphrase": {
                                                  "type": "string"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            },
                            {
                              "if": {
                                "properties": {
                                  "type": {
                                    "const": "Kerberos"
                                  }
                                }
                              },
                              "then": {
                                "required": ["spec"],
                                "properties": {
                                  "spec": {
                                    "type": "object",
                                    "required": ["principal", "realm"],
                                    "properties": {
                                      "principal": {
                                        "type": "string"
                                      },
                                      "realm": {
                                        "type": "string"
                                      },
                                      "tgtGenerationMethod": {
                                        "type": "string",
                                        "enum": ["KeyTabFilePath", "Password"]
                                      }
                                    },
                                    "allOf": [
                                      {
                                        "if": {
                                          "properties": {
                                            "tgtGenerationMethod": {
                                              "const": "KeyTabFilePath"
                                            }
                                          }
                                        },
                                        "then": {
                                          "required": ["spec"],
                                          "properties": {
                                            "spec": {
                                              "type": "object",
                                              "required": ["keyPath"],
                                              "properties": {
                                                "keyPath": {
                                                  "type": "string"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      },
                                      {
                                        "if": {
                                          "properties": {
                                            "tgtGenerationMethod": {
                                              "const": "Password"
                                            }
                                          }
                                        },
                                        "then": {
                                          "required": ["spec"],
                                          "properties": {
                                            "spec": {
                                              "type": "object",
                                              "required": ["password"],
                                              "properties": {
                                                "password": {
                                                  "type": "string"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          ]
                        }
                      }
                    }
                  }
                }
              }
            ]
          }
        }
      }
    }
  ]
}
